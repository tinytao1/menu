<!DOCTYPE html><html><head><title>My loop</title><style>

.btn {
	margin-bottom:5px;
    width:120px;
}

</style>
</head>
<body>

<h2>heading</h2>

<p> click "Run" button to view </p>

<p id="s1-count"></p>

<button type='button' id='a1' class='btn'>
	click </button> <br>
<button type='button' id='a2' class='btn'>
	click </button> <br>
<button type='button' id='a3' class='btn'>
	click </button> <br>
<button type='button' id='a4' class='btn'>
	click </button> <br>

<script>

let a1 = document.getElementById("a1");
let a2 = document.getElementById("a2");
let a3 = document.getElementById("a3");
let a4 = document.getElementById("a4");


const all = [a1,a2,a3,a4];

const s1 = {

	count : 0,
    limit: 2,
    reactivateSelectedItemButtons: function() {
      if (s1.item1.selected == true) {
        s1.item1.button.disabled = false;
      }
      if (s1.item2.selected == true) {
        s1.item2.button.disabled = false;
      }
      /*
      if (s1.item1.selected == true) {
        s1.item1.button.disabled = false;
      }
      if (s1.item1.selected == true) {
        s1.item1.button.disabled = false;
      }
      */
    },
    
    reactivateAllItemButtons: function() {
      s1.item1.button.disabled = false;
      s1.item2.button.disabled = false;
      //s1.item4.button.disabled = false;
      //s1.item3.button.disabled = false;
      
    },
    
    displayCount: document.getElementById("s1-count"),
    
    displaySectionCount: function() {
      this.displayCount.innerHTML = "Section count: " + this.count;
    },
    
    item1: {
    	name:"Tilapia",
        selected: false,
        count: 0,
        limit: null,
        button: document.getElementById("a1"), 
        
        updateButtonName: function() {
          if (this.selected == true) {
          this.button.innerHTML = s1.item1.name + " " + this.count;
          } else {this.button.innerHTML = s1.item1.name} // display w/o count
        },
        
        select: function() {
        
        	if (s1.count == s1.limit) {
              s1.count = s1.count - this.count;
              this.count = 0;
              this.selected = false;
              s1.reactivateAllItemButtons();
              this.updateButtonName();
              s1.displaySectionCount();
            }
            else {
        	  this.count++;
              s1.count++;
              this.selected = true;
              this.updateButtonName();
              s1.displaySectionCount();
            }
            
            if (s1.count == s1.limit) { 
              deactivateAllBtns();
              s1.reactivateSelectedItemButtons();
              s1.displaySectionCount();
            }
            
            
        }, 
    },
        
    item2: {
    	name:"Pork Chop",
        selected: false,
        count: 0,
        limit: null,
        button: document.getElementById("a2"), 
        
        }
};

 a1.innerHTML = s1.item1.name;
 a2.innerHTML = s1.item2.name;
























function deactivateAllBtns() {
	for (var i = 0;
    	 i < all.length;
         i++ ) {
    all[i].disabled = true;
 	}
}

function reactivateLoop() {
	for (var i = 0;
    	 i < all.length;
         i++ ) {
    all[i].disabled = false;
 	}
}

//deactivateLoop();

document.getElementById("s1-count").innerHTML = 5 + " para";

a1.addEventListener('click', function() { 
	s1.item1.select();
    // deactivateLoop();
});

s1.displayCount.addEventListener("mouseover", function () {
  s1.reactivateSelectedItemButtons();
});


















</script>

</body>
</html>
